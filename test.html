<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <div id="container" style="width: 100%; height: 100vh;">
    <canvas id="canvas" style="background-color: transparent;"></canvas>
  </div>

  <script>
    const container = document.getElementById("container");
    const canvas = document.getElementById("canvas");
    canvas.width = container.clientWidth;
    canvas.height = container.clientHeight;

    const ctx = canvas.getContext("2d");

    const resolution = 5; // Size of each cell
    const rows = canvas.height / resolution;
    const cols = canvas.width / resolution;
    
    // Create a 2D array to hold the state of the cells
    let grid = new Array(cols).fill(null).map(() => new Array(rows).fill(false));

    // Initialize the grid with random values
    for (let i = 0; i < cols; i++) {
      for (let j = 0; j < rows; j++) {
        grid[i][j] = Math.random() > 0.5;
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let i = 0; i < cols; i++) {
        for (let j = 0; j < rows; j++) {
          const x = i * resolution;
          const y = j * resolution;
          ctx.fillStyle = grid[i][j] ? "black" : "transparent";
          ctx.fillRect(x, y, resolution, resolution);
        }
      }
    }

    function update() {
      const nextGrid = new Array(cols).fill(null).map(() => new Array(rows).fill(false));

      for (let i = 0; i < cols; i++) {
        for (let j = 0; j < rows; j++) {
          const cell = grid[i][j];
          let neighbors = 0;

          for (let x = -1; x <= 1; x++) {
            for (let y = -1; y <= 1; y++) {
              const col = (i + x + cols) % cols;
              const row = (j + y + rows) % rows;
              neighbors += grid[col][row] ? 1 : 0;
            }
          }

          // Apply Conway's Game of Life rules
          if (cell) {
            neighbors -= 1;
            if (neighbors === 2 || neighbors === 3) {
              nextGrid[i][j] = true;
            }
          } else {
            if (neighbors === 3) {
              nextGrid[i][j] = true;
            }
          }
        }
      }

      grid = nextGrid;
    }

    function randomCell() {
      const randomCol = Math.floor(Math.random() * cols);
      const randomRow = Math.floor(Math.random() * rows);
      grid[randomCol][randomRow] = !grid[randomCol][randomRow];
    }

    function loop() {
      draw();
      update();
      requestAnimationFrame(loop);
    }

    setInterval(randomCell, 2500); // Choose a random cell every 2.5 seconds
    loop(); // Start the animation loop
  </script>
</body>
</html>
